<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>내 이야기 만들기 - Planned Happenstance</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            min-height: 100vh;
        }
        
        .app-container {
            max-width: 700px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .main-title {
            font-size: 32px;
            font-weight: 700;
            color: #06b6d4;
            margin-bottom: 12px;
        }
        
        .subtitle {
            font-size: 16px;
            color: #94a3b8;
        }
        
        .intro-box {
            background: rgba(15, 23, 42, 0.6);
            border: 2px solid rgba(6, 182, 212, 0.3);
            border-radius: 16px;
            padding: 32px;
            margin-bottom: 40px;
        }
        
        .intro-text {
            color: #e2e8f0;
            font-size: 16px;
            line-height: 1.7;
            margin-bottom: 24px;
        }
        
        .btn-start {
            width: 100%;
            background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
            color: white;
            padding: 16px 32px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(6, 182, 212, 0.3);
        }
        
        .btn-start:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(6, 182, 212, 0.4);
        }
        
        .progress-bar {
            background: rgba(30, 41, 59, 0.6);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .progress-text {
            font-size: 14px;
            color: #94a3b8;
            margin-bottom: 12px;
            text-align: center;
        }
        
        .progress-track {
            background: rgba(71, 85, 105, 0.5);
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, #06b6d4 0%, #0891b2 100%);
            height: 100%;
            transition: width 0.3s ease;
        }
        
        .event-form {
            background: rgba(15, 23, 42, 0.6);
            border: 2px solid rgba(6, 182, 212, 0.3);
            border-radius: 16px;
            padding: 32px;
            margin-bottom: 30px;
        }
        
        .form-group {
            margin-bottom: 24px;
        }
        
        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #06b6d4;
            margin-bottom: 8px;
        }
        
        .form-input,
        .form-textarea {
            width: 100%;
            background: rgba(30, 41, 59, 0.6);
            border: 1px solid rgba(71, 85, 105, 0.5);
            border-radius: 8px;
            padding: 12px 16px;
            font-size: 15px;
            color: #e2e8f0;
            font-family: inherit;
            transition: all 0.3s ease;
        }
        
        .form-input:focus,
        .form-textarea:focus {
            outline: none;
            border-color: #06b6d4;
            box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.1);
        }
        
        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .skills-section {
            margin-top: 24px;
            padding-top: 24px;
            border-top: 1px solid rgba(71, 85, 105, 0.3);
        }
        
        .skills-title {
            font-size: 14px;
            font-weight: 600;
            color: #06b6d4;
            margin-bottom: 16px;
        }
        
        .skills-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }
        
        .skill-checkbox {
            display: flex;
            align-items: center;
            background: rgba(30, 41, 59, 0.4);
            border: 1px solid rgba(71, 85, 105, 0.5);
            border-radius: 8px;
            padding: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .skill-checkbox:hover {
            border-color: rgba(6, 182, 212, 0.5);
            background: rgba(30, 41, 59, 0.6);
        }
        
        .skill-checkbox input {
            margin-right: 12px;
            cursor: pointer;
        }
        
        .skill-label {
            color: #cbd5e1;
            font-size: 14px;
        }
        
        .button-group {
            display: flex;
            gap: 12px;
            margin-top: 30px;
        }
        
        .btn {
            flex: 1;
            padding: 14px 24px;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(6, 182, 212, 0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(6, 182, 212, 0.4);
        }
        
        .btn-secondary {
            background: rgba(30, 41, 59, 0.6);
            border: 1px solid rgba(6, 182, 212, 0.3);
            color: #06b6d4;
        }
        
        .btn-secondary:hover {
            background: rgba(30, 41, 59, 0.8);
        }
        
        .result-container {
            background: rgba(15, 23, 42, 0.6);
            border: 2px solid rgba(6, 182, 212, 0.3);
            border-radius: 16px;
            padding: 32px;
        }
        
        .result-title {
            font-size: 24px;
            font-weight: 700;
            color: #06b6d4;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .skill-result-section {
            margin-bottom: 30px;
        }
        
        .skill-result-header {
            font-size: 18px;
            font-weight: 700;
            color: #e2e8f0;
            margin-bottom: 16px;
        }
        
        .event-result-card {
            background: rgba(30, 41, 59, 0.6);
            border: 1px solid rgba(71, 85, 105, 0.5);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 12px;
        }
        
        .event-result-title {
            font-size: 16px;
            font-weight: 600;
            color: #06b6d4;
            margin-bottom: 8px;
        }
        
        .event-result-text {
            font-size: 14px;
            color: #cbd5e1;
            line-height: 1.6;
        }
        
        @media (max-width: 768px) {
            .main-title {
                font-size: 24px;
            }
            
            .event-form {
                padding: 24px;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState } = React;
        
        const SKILLS = [
            { id: 'curiosity', name: 'Curiosity (호기심)' },
            { id: 'persistence', name: 'Persistence (끈기)' },
            { id: 'flexibility', name: 'Flexibility (유연성)' },
            { id: 'optimism', name: 'Optimism (낙관주의)' },
            { id: 'risk_taking', name: 'Risk-taking (위험 감수)' }
        ];
        
        function MyStoryApp() {
            const [stage, setStage] = useState('intro');
            const [currentEvent, setCurrentEvent] = useState(1);
            const [events, setEvents] = useState([
                { period: '', title: '', situation: '', action: '', skills: [] },
                { period: '', title: '', situation: '', action: '', skills: [] },
                { period: '', title: '', situation: '', action: '', skills: [] },
                { period: '', title: '', situation: '', action: '', skills: [] }
            ]);
            
            const updateEvent = (field, value) => {
                const newEvents = [...events];
                newEvents[currentEvent - 1][field] = value;
                setEvents(newEvents);
            };
            
            const toggleSkill = (skillId) => {
                const newEvents = [...events];
                const currentSkills = newEvents[currentEvent - 1].skills;
                
                if (currentSkills.includes(skillId)) {
                    newEvents[currentEvent - 1].skills = currentSkills.filter(s => s !== skillId);
                } else {
                    newEvents[currentEvent - 1].skills = [...currentSkills, skillId];
                }
                
                setEvents(newEvents);
            };
            
            const handleNext = () => {
                if (currentEvent < 4) {
                    setCurrentEvent(currentEvent + 1);
                } else {
                    setStage('result');
                }
            };
            
            const handlePrevious = () => {
                if (currentEvent > 1) {
                    setCurrentEvent(currentEvent - 1);
                }
            };
            
            const currentEventData = events[currentEvent - 1];
            const progress = (currentEvent / 4) * 100;
            
            // Intro Stage
            if (stage === 'intro') {
                return (
                    <div className="app-container">
                        <div className="header">
                            <h1 className="main-title">내 이야기 만들기</h1>
                            <p className="subtitle">나의 Planned Happenstance 여정</p>
                        </div>
                        
                        <div className="intro-box">
                            <p className="intro-text">
                                여러분의 인생에서 <strong style={{color: '#06b6d4'}}>우연한 사건</strong>이 
                                커리어에 영향을 준 순간을 떠올려보세요.
                            </p>
                            <p className="intro-text">
                                4가지 주요 이벤트를 입력하고, 각 이벤트에서 
                                어떤 기술(Curiosity, Persistence, Flexibility, Optimism, Risk-taking)을 
                                발휘했는지 선택해보세요.
                            </p>
                            <button className="btn-start" onClick={() => setStage('input')}>
                                시작하기 →
                            </button>
                        </div>
                    </div>
                );
            }
            
            // Input Stage
            if (stage === 'input') {
                return (
                    <div className="app-container">
                        <div className="header">
                            <h1 className="main-title">이벤트 {currentEvent}/4</h1>
                        </div>
                        
                        <div className="progress-bar">
                            <p className="progress-text">진행률: {Math.round(progress)}%</p>
                            <div className="progress-track">
                                <div className="progress-fill" style={{width: `${progress}%`}}></div>
                            </div>
                        </div>
                        
                        <div className="event-form">
                            <div className="form-group">
                                <label className="form-label">시기</label>
                                <input
                                    type="text"
                                    className="form-input"
                                    placeholder="예: 대학교 2학년, 2015년 여름"
                                    value={currentEventData.period}
                                    onChange={(e) => updateEvent('period', e.target.value)}
                                />
                            </div>
                            
                            <div className="form-group">
                                <label className="form-label">이벤트 제목</label>
                                <input
                                    type="text"
                                    className="form-input"
                                    placeholder="예: 우연히 참가한 창업 동아리"
                                    value={currentEventData.title}
                                    onChange={(e) => updateEvent('title', e.target.value)}
                                />
                            </div>
                            
                            <div className="form-group">
                                <label className="form-label">우연한 사건</label>
                                <textarea
                                    className="form-textarea"
                                    placeholder="어떤 우연한 일이 일어났나요?"
                                    value={currentEventData.situation}
                                    onChange={(e) => updateEvent('situation', e.target.value)}
                                />
                            </div>
                            
                            <div className="form-group">
                                <label className="form-label">나의 행동</label>
                                <textarea
                                    className="form-textarea"
                                    placeholder="그 상황에서 어떻게 행동했나요?"
                                    value={currentEventData.action}
                                    onChange={(e) => updateEvent('action', e.target.value)}
                                />
                            </div>
                            
                            <div className="skills-section">
                                <p className="skills-title">발휘한 기술 선택</p>
                                <div className="skills-grid">
                                    {SKILLS.map(skill => (
                                        <label key={skill.id} className="skill-checkbox">
                                            <input
                                                type="checkbox"
                                                checked={currentEventData.skills.includes(skill.id)}
                                                onChange={() => toggleSkill(skill.id)}
                                            />
                                            <span className="skill-label">{skill.name}</span>
                                        </label>
                                    ))}
                                </div>
                            </div>
                            
                            <div className="button-group">
                                {currentEvent > 1 && (
                                    <button className="btn btn-secondary" onClick={handlePrevious}>
                                        ← 이전
                                    </button>
                                )}
                                <button className="btn btn-primary" onClick={handleNext}>
                                    {currentEvent < 4 ? '다음 →' : '결과 보기'}
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }
            
            // Result Stage
            if (stage === 'result') {
                const skillGroups = {};
                SKILLS.forEach(skill => {
                    skillGroups[skill.id] = {
                        name: skill.name,
                        events: []
                    };
                });
                
                events.forEach((event, index) => {
                    event.skills.forEach(skillId => {
                        skillGroups[skillId].events.push({
                            ...event,
                            number: index + 1
                        });
                    });
                });
                
                return (
                    <div className="app-container">
                        <div className="result-container">
                            <h2 className="result-title">나의 Planned Happenstance 분석</h2>
                            
                            {SKILLS.map(skill => {
                                const group = skillGroups[skill.id];
                                if (group.events.length === 0) return null;
                                
                                return (
                                    <div key={skill.id} className="skill-result-section">
                                        <h3 className="skill-result-header">{skill.name}</h3>
                                        {group.events.map((event, idx) => (
                                            <div key={idx} className="event-result-card">
                                                <p className="event-result-title">
                                                    Event {event.number}: {event.title} ({event.period})
                                                </p>
                                                <p className="event-result-text">
                                                    <strong>우연한 사건:</strong> {event.situation}
                                                </p>
                                                <p className="event-result-text">
                                                    <strong>나의 행동:</strong> {event.action}
                                                </p>
                                            </div>
                                        ))}
                                    </div>
                                );
                            })}
                            
                            <div style={{textAlign: 'center', marginTop: '30px'}}>
                                <button
                                    className="btn btn-secondary"
                                    onClick={() => {
                                        setStage('intro');
                                        setCurrentEvent(1);
                                        setEvents([
                                            { period: '', title: '', situation: '', action: '', skills: [] },
                                            { period: '', title: '', situation: '', action: '', skills: [] },
                                            { period: '', title: '', situation: '', action: '', skills: [] },
                                            { period: '', title: '', situation: '', action: '', skills: [] }
                                        ]);
                                    }}
                                >
                                    다시 만들기
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }
            
            return null;
        }
        
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<MyStoryApp />);
    </script>
</body>
</html>
